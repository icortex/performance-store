<%= form_for(@product, :html => {:multipart => true}) do |f| %>
    <%= render 'error_messages', :p => @product %>

    <div class="left">
      <%= image_tag @product.image.url :medium %>
      <br/>
      <%= f.file_field :image %>
    </div>

    <table class="form_class">
      <tr>
        <td>
          <%= f.label 'Marca' %>
        </td>
        <td>
          <%= f.select :brand_id, Brand.all.collect { |brand| [brand.brand, brand.id] } %>
          <%= link_to image_tag('/images/add.png', :id=>"brand", :title => 'Agregar nueva marca'), '#' %>
        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Tipo' %>
        </td>
        <td>
          <%= f.select :cloth_type_id, ClothType.all.collect { |element| [element.cloth_type, element.id] } %>
          <%= link_to image_tag('/images/add.png', :id=>"cloth_type", :title => 'Agregar nuevo tipo de prenda'), '#' %>
        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Referencia' %>
        </td>
        <td>
          <%= f.text_field :reference %>
        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Modelo' %>
        </td>
        <td>
          <%= f.text_field :model %>
        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Codigo de barras' %>
        </td>
        <td>
          <%= f.text_field :barcode %>
        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Genero' %>
        </td>
        <td>
          <%= f.radio_button :gender, 'Hombre', :checked => true %>Hombre
          <%= f.radio_button :gender, 'Mujer' %>Mujer
          <%= f.radio_button :gender, 'Unisex' %>Unisex
        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Talla' %>
        </td>
        <td width="100px">

          <% Size.all.each do |size| %>
              <div style="display:inline-block;">
                <%= check_box_tag "size_ids[#{size.size}]", size.id, checked_if_included(@sizes,size.size) %><%= size.size %>
              </div>
          <% end %>
          <%= link_to image_tag('/images/add.png', :id=>"size", :title => 'Agregar nueva talla'), '#' %>

        </td>
      </tr>
      <tr>
        <td>
          <%= f.label 'Color' %>
        </td>
        <td width="100px">
          <% Color.all.each do |color| %>
              <div style="display:inline-block;">
                <%= check_box_tag "color_ids[#{color.color}]", color.id, checked_if_included(@colors,color.color) %><%= f.label 'wj', :style=>"background:##{color.rgb};color:##{color.rgb};", :class=>'color_selector' %>
              </div>
          <% end %>
          <%= link_to image_tag('/images/add.png', :id=>"color", :title => 'Agregar nuevo color'), '#' %>
        </td>
      </tr>
    </table>

    <div class="actions">
      <%= f.submit 'Aceptar' %>
    </div>

    <div id="add_popup"></div>
    <script type="text/javascript">
        jq('#brand').click(function() {
            jq('#add_popup').load('<%= "/brands/nuevo" %>', null);
            jq('#add_popup').dialog({
                title: 'Nueva Marca',
                modal: true
            });
        });
        jq('#cloth_type').click(function() {
            jq('#add_popup').load('<%= "/cloth_types/nuevo" %>', null);
            jq('#add_popup').dialog({
                title: 'Nuevo tipo de prenda',
                modal: true
            });
        });
        jq('#size').click(function() {
            jq('#add_popup').load('<%= "/sizes/nuevo" %>', null);
            jq('#add_popup').dialog({
                title: 'Nueva talla',
                modal: true
            });
        });

        jq('#color').click(function() {
            jq('#add_popup').load('<%= "/colors/nuevo" %>', null);
            jq('#add_popup').dialog({
                title: 'Nuevo color',
                modal: true
            });
        });
    </script>
<% end %>